# Maintainer: Olivier Tilloy <otilloy@igalia.com>

pkgname=xdg-desktop-portal-holo
_commit=0ae41c9ee1e237e68d69cc92017e6a33f5323b5f
pkgver=0.1.10.0ae41c9
pkgrel=1
pkgdesc='A backend implementation for xdg-desktop-portal of holo-specific interfaces'
url="https://github.com/evlav/$pkgname"
arch=('x86_64')
source=("git+https://github.com/evlav/$pkgname.git#commit=$_commit")
depends=('glib2')
makedepends=('fontconfig'
             'git'
             'glib2-devel'
             'meson'
             'pkgconf'
             'systemd'
             'xdg-desktop-portal')
license=('LGPL-2.1-or-later')
sha256sums=('SKIP')
provides=('xdg-desktop-portal-impl')

pkgver() {
  cd "$srcdir/$pkgname"

  echo 0.1.$(git rev-list --count HEAD).$(git rev-parse --short HEAD)
}

prepare() {
  cd "$pkgname"
}

build() {
  arch-meson "$pkgname" _build
  meson compile -C _build
}

package() {
  meson install -C _build --destdir "$pkgdir"
}

